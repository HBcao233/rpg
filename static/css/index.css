@font-face {
  font-family: 'Microsoft YaHei';
  src: url('/static/fonts/MicrosoftYaHei.ttf') format('truetype');
}
@font-face {
  font-family: 'chinese punctuation';
  src: url('/static/fonts/MicrosoftYaHei.ttf') format('truetype');
  unicode-range: 
    U+FF0C, /* 中文逗号 */
    U+FF1A; /* 中文冒号 */
}

@font-face {
  font-family: 'しねきゃぷしょん';
  src: url('/static/fonts/しねきゃぷしょん.ttf') format('truetype');
}

@keyframes fadeIn {
  0% {
    opacity: 0;
    transform: translateX(-50px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}


* {
  margin: 0;
  padding: 0;
  font-family: 
    'chinese punctuation', 
    'しねきゃぷしょん', 
    'Microsoft YaHei', 
    'Arial', sans-serif;
}
html, body {
  width: 100%;
  height: 100%;
  overflow: hidden;
  box-sizing: border-box;
  line-height: 1.6;
}
body {
  background: #000000;
  font-size: 16px;
  color: #fff;
}
.container {
  width: 100%;
  height: 100%;
  overflow: auto;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
}
.container.map_show_reverse {
  flex-direction: column-reverse;
}
.container.map_show_reverse > div:first-child {
  margin-bottom: auto;
}

a {
  color: #66ccff;
}
a.link::before {
  content: '';
  display: inline-block;
  width: 1em;
  height: 1em;
  background-color: currentColor;
  -webkit-mask-image: url('/static/svg/link.svg');
  mask-image: url('/static/svg/link.svg');
  transform: translateY(2px);
}

.image_box {
  width: 100%;
  height: fit-content;
  display: flex;
  margin: 5px 0 10px 0;
  overflow: auto;
  border-radius: 3px;
}
img {
  width: 100%;
  height: auto;
  margin: 0 auto;
}
img.icon {
  width: 25px;
  height: 25px;
  margin-left: 5px;
}
.item {
  display: inline-block;
  vertical-align: middle;
}

.item_icon {
  margin-left: 5px;
  border: 1px solid #fa20fa;
  display: flex;
  justify-content: center;
  align-items: center;
  display: inline-flex;
  width: 20px;
  height: 20px;
  transform: translateY(2px);
}
.item_icon img {
  width: 17px;
  height: 17px;
}


.item_common {
  background-color: #926443;
}
.item_uncommon {
  background-color: #919191;
}
.item_rare {
  background-color: #8c801c;
}
.item_scroll1 {
  background-color: #ff9b9b;
}
.item_scroll2 {
  background-color: #8e8123;
}
.item_epic {
  background-color: #8c801e;
}

.btn {
  width: fit-content;
  height: fit-content;
  padding: 3px 10px;
  border: 2px solid #afae00;
  background: #1e1e1e;
  color: #e7f063; 
  border-radius: 3px;
}
.btn.disabled {
  opacity: .5;
}
.btn:active {
  opacity: .6;
}

.danger {
  background: red;
  color: #fff;
}

p, .p {
  text-indent: 2em;
}
.p div {
  text-indent: 0;
}

details summary {
  display: flex;
  align-items: center;
  list-style: none; 
  cursor: pointer; 
}

details summary::before {
  content: '';
  display: inline-block; 
  width: 20px;
  height: 20px;
  background: url('data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNNTM1LjQ2NjY2NyA4MTIuOGw0NTAuMTMzMzMzLTU2My4yYzE0LjkzMzMzMy0xOS4yIDIuMTMzMzMzLTQ5LjA2NjY2Ny0yMy40NjY2NjctNDkuMDY2NjY3SDYxLjg2NjY2N2MtMjUuNiAwLTM4LjQgMjkuODY2NjY3LTIzLjQ2NjY2NyA0OS4wNjY2NjdsNDUwLjEzMzMzMyA1NjMuMmMxMi44IDE0LjkzMzMzMyAzNC4xMzMzMzMgMTQuOTMzMzMzIDQ2LjkzMzMzNCAweiIgZmlsbD0iI2ZmZmZmZiI+PC9wYXRoPjwvc3ZnPg==') center/50% no-repeat;
  margin-right: 5px; 
  transform: rotate(-90deg); 
  transition: transform 0.3s ease; 
}

/* 当细节展开时，调整箭头旋转方向 */
details[open] summary::before {
  transform: rotate(0deg);
}

.row {
  display: flex;
  align-items: flex-end;
}
.row.center {
  justify-content: center;
}
.row.middle {
  align-items: center;
}
.row.column {
  flex-direction: column; 
}

figure {
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  width: 100%;
  align-items: center;
}

.pc-only {
  display: none;
}


.box {
  border: 2px solid #c1b91c;
  background: #1e1e1e;
  padding: 5px;
  margin: 15px 0;
}
.box1 {
  border: 2px solid #c1b91c;
  background: #1e1e1e;
}
.box2 {
  border: 2px solid #fff;
  background: #083230;
}
.box3 {
  border: 2px solid #ea0700;
  background: #340809;
}
.box4 {
  border: 2px solid #042eb8;
  background: #120f24;
}
.box5 {
  border: 2px solid #07309a;
  background: #25221d;
}
.box6 {
  border: 2px solid #cdb32b;
  background: #222601;
}
.box7 {
  border: 2px solid #2e6232;
  background: #001101;
}
.box8 {
  border: 2px solid #ffffff;
  background: #2b2b2b;
}
.box9 {
  border: 2px solid #fd8c90;
  background: #2e2528;
}
.box10 {
  border: 2px solid #fa20fa;
  background: #0c0c0c;
}
.box12 {
  border: 2px solid #432d1f;
  background: #ad8b66;
}
.border-none {
  border: none;
}
.border7 {
  border: 2px solid #2e6232;
}
.bg7 {
  background: #001101;
}
.bg11 {
  background: #011e0c;
}
.box13 {
  border: 2px solid #183f20;
  background: #082e09;
}
.box14 {
  border: 2px solid #01eded;
  background: #152727;
}
.box15 {
  border: 1px solid #183517;
  background: #1f3c20;
}


.curse {
  display: flex;
  overflow: hidden;
  flex-wrap: wrap;
}
.curse img {
  max-width: 100%;
  height: auto;
}
.curse .curse_header,
.curse .curse_effect {
  width: 25%;
}
.curse .curse_effect4 {
  width: 100%;
}
.curse .enemy_name {
  color: #ffb600;
  font-size: 20px;
  height: 50px;
  background: #001101;
  display: flex;
  justify-content: center;
  align-items: center;
}
.curse .enemy_img {
  width: 100%;
}
.curse .curse_name {
  color: #1ea45d;
  font-size: 18px;
  height: 50px;
  display: flex;
  justify-content: center;
  align-items: center;
}
.curse_details {
  background: #001101;
  height: 100%;
  padding: 10px;
  padding-top: 0;
}
.curse_gap {
  width: 100%;
  height: 0;
}

.curse_effect {
  background: #011e0c;
}
.curse_effect > .header {
  width: 100%;
  height: 50px;
  flex-shrink: 0;
}
.curse_effect_details {
  padding: 10px;
  padding-top: 0;
}
.curse_effect4 .curse_effect_info {
  display: flex;
}
.curse_effect .image_box {
  height: 180px;
}
.curse_effect4 .image_box {
  width: 25%;
  height: fit-content;
  flex-shrink: 0;
}
.curse_effect .title {
  width: 50px;
  height: 50px;
  margin: 0 auto;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 20px;
  background: #001101;
  border: 2px solid #1ea45d;
  transform: translateY(2px);
}
.curse_effect_name {
  height: 40px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}
.curse_effect1 > .header {
  background-image: linear-gradient(to right, #03fc48, #53af33);
}
.curse_effect2 .header {
  background-image: linear-gradient(to right, #53af33, #a95819);
}
.curse_effect3 .header {
  background-image: linear-gradient(to right, #a95819, #fa0502);
}
.curse_effect4 .header {
  background-image: linear-gradient(to right, #fa0502, #9b0702);
}
@media only screen and (max-width: 768px) {
  .curse_effect {
    margin-top: 20px;
  }
  .curse .curse_header,
  .curse .curse_effect {
    width: 100%;
  }
  .curse_effect4 .curse_effect_info {
    flex-direction: column;
  }
  .curse_effect .image_box {
    height: auto;
  }
  .curse_effect4 .image_box {
    width: 100%;
  }
}

.text-center {
  text-align: center;
}
.text-gradient {
  display: inline-block;
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}
.gradient1 {
  background-image: linear-gradient(to right, #b4272f, #bc2d1f);
}
.gradient2 {
  background-image: linear-gradient(to right, #8d54c9, #8e56c1);
}
.gradient3 {
  background-image: linear-gradient(to right, #ea99a2, #eb999b);
}
.gradient4 {
  background-image: linear-gradient(to right, #2ebb21, #38b827);
}
.gradient5 {
  background-image: linear-gradient(to right, #f26ed4, #f66dd7);
}

.underline {
  text-decoration: underline;
}
.text_colors tr td:first-child {
  width: 75px;
}
.color_task {
  color: #8d8d8d;
}
.color_npc {
  color: #739ceb;
}
.color_clothes {
  color: #d280c2;
}
.color_passive {
  color: #8d04ff;
}
.color_curse {
  color: #1ea45d;
}
.color_curse2 {
  color: #9ea301;
}
.color_curse3 {
  color: #963c08;
}
.color_enemy {
  color: #ffb600;
}
.color_dick {
  color: #b41a56;
}
.color_key {
  color: #e7f063;
}
.color_fight {
  color: #cd000b;
}
.color_hp {
  color: #b60801;
}
.color_bad {
  color: #ce070c;
}
.color_bad_ending {
  color: #f40502;
}
.color_boos {
  color: #ae0613;
}
.color_useful {
  color: #2b7447;
}
.color_random {
  color: #8489da;
}
.color_chest {
  color: #c0c920;
}
.color_skill {
  color: #2bece7;
}
.color_semen {
  color: #8c8c8c;
}
.color_item {
  color: #6ff2a4;
}
.color_pussy {
  color: #ea959c;
}
.color_anus {
  color: #ff0a5b;
}
.color_coin {
  color: #ffff00;
}
.color_common {
  color: #fff;
}
.color_uncommon {
  color: #72f79c;
}
.color_camp1 {
  color: #ffb700;
}
.color_camp2 {
  color: #7530a4;
}

.action {
  color: #6086cd;
}
.action:active {
  opacity: .6;
}

.dice {
  display: inline-block;
  text-align: center;
  cursor: pointer;
  transition: transform 0.3s;
  width: 40px;
  height: 40px;
  margin: 0 10px;
  font-size: 20px;
  font-weight: bold;
  color: #000;
  line-height: 40px;
  background-repeat: no-repeat;
  background-size: contain;
  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cmVjdCB4PSI1IiB5PSI1IiB3aWR0aD0iOTAiIGhlaWdodD0iOTAiIHJ4PSIxMCIgc3R5bGU9ImZpbGw6I2ZmZjtzdHJva2U6IzMzMztzdHJva2Utd2lkdGg6MjsiLz48L3N2Zz4=');
}

.dice:active {
  transform: scale(0.95);
}

.dice.disabled,
.dice.disabled_dice {
  opacity: .3;
}
.dice.active {
  opacity: 1;
}


.dice.d1 {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cmVjdCB4PSI1IiB5PSI1IiB3aWR0aD0iOTAiIGhlaWdodD0iOTAiIHJ4PSIxMCIgc3R5bGU9ImZpbGw6I2ZmZjtzdHJva2U6IzMzMztzdHJva2Utd2lkdGg6MjsiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSI4IiBmaWxsPSIjMzMzIi8+PC9zdmc+');
}

.dice.d2 {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cmVjdCB4PSI1IiB5PSI1IiB3aWR0aD0iOTAiIGhlaWdodD0iOTAiIHJ4PSIxMCIgc3R5bGU9ImZpbGw6I2ZmZjtzdHJva2U6IzMzMztzdHJva2Utd2lkdGg6MjsiLz48Y2lyY2xlIGN4PSIyNSIgY3k9IjI1IiByPSI4IiBmaWxsPSIjMzMzIi8+PGNpcmNsZSBjeD0iNzUiIGN5PSI3NSIgcj0iOCIgZmlsbD0iIzMzMyIvPjwvc3ZnPg==');
}

.dice.d3 {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cmVjdCB4PSI1IiB5PSI1IiB3aWR0aD0iOTAiIGhlaWdodD0iOTAiIHJ4PSIxMCIgc3R5bGU9ImZpbGw6I2ZmZjtzdHJva2U6IzMzMztzdHJva2Utd2lkdGg6MjsiLz48Y2lyY2xlIGN4PSIyNSIgY3k9IjI1IiByPSI4IiBmaWxsPSIjMzMzIi8+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iOCIgZmlsbD0iIzMzMyIvPjxjaXJjbGUgY3g9Ijc1IiBjeT0iNzUiIHI9IjgiIGZpbGw9IiMzMzMiLz48L3N2Zz4=');
}

.dice.d4 {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cmVjdCB4PSI1IiB5PSI1IiB3aWR0aD0iOTAiIGhlaWdodD0iOTAiIHJ4PSIxMCIgc3R5bGU9ImZpbGw6I2ZmZjtzdHJva2U6IzMzMztzdHJva2Utd2lkdGg6MjsiLz48Y2lyY2xlIGN4PSIyNSIgY3k9IjI1IiByPSI4IiBmaWxsPSIjMzMzIi8+PGNpcmNsZSBjeD0iMjUiIGN5PSI3NSIgcj0iOCIgZmlsbD0iIzMzMyIvPjxjaXJjbGUgY3g9Ijc1IiBjeT0iMjUiIHI9IjgiIGZpbGw9IiMzMzMiLz48Y2lyY2xlIGN4PSI3NSIgY3k9Ijc1IiByPSI4IiBmaWxsPSIjMzMzIi8+PC9zdmc+');
}

.dice.d5 {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cmVjdCB4PSI1IiB5PSI1IiB3aWR0aD0iOTAiIGhlaWdodD0iOTAiIHJ4PSIxMCIgc3R5bGU9ImZpbGw6I2ZmZjtzdHJva2U6IzMzMztzdHJva2Utd2lkdGg6MjsiLz48Y2lyY2xlIGN4PSIyNSIgY3k9IjI1IiByPSI4IiBmaWxsPSIjMzMzIi8+PGNpcmNsZSBjeD0iMjUiIGN5PSI3NSIgcj0iOCIgZmlsbD0iIzMzMyIvPjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjgiIGZpbGw9IiMzMzMiLz48Y2lyY2xlIGN4PSI3NSIgY3k9IjI1IiByPSI4IiBmaWxsPSIjMzMzIi8+PGNpcmNsZSBjeD0iNzUiIGN5PSI3NSIgcj0iOCIgZmlsbD0iIzMzMyIvPjwvc3ZnPg==');
}

.dice.d6 {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cmVjdCB4PSI1IiB5PSI1IiB3aWR0aD0iOTAiIGhlaWdodD0iOTAiIHJ4PSIxMCIgc3R5bGU9ImZpbGw6I2ZmZjtzdHJva2U6IzMzMztzdHJva2Utd2lkdGg6MjsiLz48Y2lyY2xlIGN4PSIyNSIgY3k9IjI1IiByPSI4IiBmaWxsPSIjMzMzIi8+PGNpcmNsZSBjeD0iMjUiIGN5PSI1MCIgcj0iOCIgZmlsbD0iIzMzMyIvPjxjaXJjbGUgY3g9IjI1IiBjeT0iNzUiIHI9IjgiIGZpbGw9IiMzMzMiLz48Y2lyY2xlIGN4PSI3NSIgY3k9IjI1IiByPSI4IiBmaWxsPSIjMzMzIi8+PGNpcmNsZSBjeD0iNzUiIGN5PSI1MCIgcj0iOCIgZmlsbD0iIzMzMyIvPjxjaXJjbGUgY3g9Ijc1IiBjeT0iNzUiIHI9IjgiIGZpbGw9IiMzMzMiLz48L3N2Zz4=');
}

.main-title {
  position: relative;
  font-size: 22px;
  line-height: 1.5;
}
.title {
  line-height: 2;
  font-size: 20px;
  font-weight: bold;
}

#转生女神 {
  color: #e3cd22;
}
#转生女神 p {
  margin-top: 10px;
}
#转生服务中心 {
  position: relative;
}
.selection {
  position: absolute;
  top: 2px;
  right: 2px;
  padding: 3px 5px;
  opacity: .5;
  border-color: transparent;
  transition: all .3s;
}
.selection:active, 
.selection.active {
  border-color: #ffb700;
  opacity: 1;
}
.reincarnate_step1, 
.reincarnate_step2 {
  width: fit-content; 
  height: 30px; 
  background: #0f0f0f; 
  margin: 0 auto; 
  padding: 8px 10px 2px 10px;
}


.camps {
  display: flex;
  justify-content: center;
}
.camp {
  text-align: center;
  margin: 10px;
  opacity: .3;
  border-style: solid;
  border-width: 0;
}
.camp.active {
  opacity: 1;
  border-width: 2px;
}
.camp1 {
  border-color: #afae00;
  background: #1e1e1e;
}
.camp2 {
  border-color: #6a315e;
  background: #000115;
}

.race {
  display: none;
  overflow: hidden;
  flex-wrap: wrap;
}
.race.show {
  display: flex;
}
.race .image_box {
  height: 180px;
}
.race_header .image_box {
  height: 300px;
}
.race img {
  max-width: 100%;
  height: auto;
}
.race_name {
  display: flex;
  align-items: center;
  justify-content: center;
}

.race_details {
  padding: 10px;
  padding-top: 0;
  padding-bottom: 20px;
}
.race_info {
  width: 100%;
}
.race_info > .header {
  width: 100%;
  height: 50px;
  flex-shrink: 0;
  text-align: center;
}
.race_clothes > .header {
  background: #620033;
}
.race_passive_skill > .header {
  background: #260033;
}
.race_active_skill > .header {
  background: #330009;
}

.race_info_title {
  height: 40px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  font-size: 19px;
}
.race_info_details {
  padding: 10px;
  padding-top: 0;
  padding-bottom: 20px;
}

.race_header,
.race_clothes,
.race_skill {
  width: 100%;
}

.race_skills {
  display: flex;
  flex-wrap: wrap;
}
.race .image_box {
  height: auto;
}



.progress-container {
  position: relative;
  flex-shrink: 0;
}
section {
  position: absolute;
  width: 100%;
  padding: 5px;
  transition: opacity .3s ease-in-out;
  visibility: hidden;
  opacity: 0;
  box-sizing: border-box;
}
section.show {
  visibility: visible;
  opacity: 1;
}

#section-title_screen .box {
  margin-bottom: 200px;
}

#section-title_screen .btn {
  display: block;
  background: transparent;
  font-size: 25px;
  color: #fff;
  border: none;
  outline: none;
  margin: 5px 20px;
  padding: 0 10px;
  user-select: none;
  cursor: pointer;
}
#section-title_screen .btn.start {
  color: #f26ed4;
}
#section-title_screen .btn.continue {
  color: #8d54c9;
}
#section-title_screen .btn.saves {
  color: #38b827;
}
#section-title_screen .btn.settings {
  color: #ea99a2;
}


/* 可悬停/点击的文字样式 */
.tooltip {
  position: relative;
  display: inline-block;
  font-weight: bold;
  cursor: pointer;
  border-bottom: 2px dotted currentColor;
  transition: all 0.3s ease;
}

.tooltip:hover {
  transform: scale(1.1);
}

/* 详情框样式 */
.tooltip-box {
  position: absolute;
  bottom: calc(100% + 10px);
  left: 50%;
  width: 200px;
  transform: translateX(-50%);
  background: #1e1e1e;
  border: 2px solid #c1b91c;
  color: white;
  padding: 12px 16px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: normal;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
  z-index: 1000;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  pointer-events: none;
}

.tooltip-box p {
  white-space: normal;
}
.tooltip-box img {
  max-width: 150px;
}

/* 详情框箭头 */
.tooltip-box::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  width: 6px;
  height: 6px;
  background: #1e1e1e;
  transform: rotate(45deg) translateY(-50%);
  border-right: 2px solid #c1b91c;
  border-bottom: 2px solid #c1b91c;
}

/* 显示状态 */
.tooltip.show .tooltip-box {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

/* 当提示框靠近左边缘时，调整位置 */
.tooltip-box.adjust-left {
  left: 0;
  transform: translateX(0);
}

.tooltip-box.adjust-left::after {
  left: 20px;
}

/* 当提示框靠近右边缘时，调整位置 */
.tooltip-box.adjust-right {
  left: auto;
  right: 0;
  transform: translateX(0);
}

.tooltip-box.adjust-right::after {
  left: auto;
  right: 20px;
}

/* 当提示框靠近顶部时，显示在下方 */
.tooltip-box.show-below {
  bottom: auto;
  top: calc(100% + 10px);
}

.tooltip-box.show-below::after {
  top: auto;
  bottom: 100%;
  width: 6px;
  height: 6px;
  background: #1e1e1e;
  transform: rotate(45deg) translateY(50%);
  border: none;
  border-top: 2px solid #c1b91c;
  border-left: 2px solid #c1b91c;
}


/* 地图 */
.map_container {
  display: none;
  justify-content: center;
  padding: 0;
}
.map_container.show {
  display: flex;
}

.map-box {
  position: relative;
}

.map {
  width: 100%;
  max-width: 500px;
  aspect-ratio: 1 / 1; /* 保持正方形 */
  overflow: hidden;
  position: relative;
  cursor: grab;
  touch-action: none;
}
.map.grabbing {
  cursor: grabbing;
}

/* 地图内容包装器 */
.map-content {
  width: 100%;
  height: 100%;
  position: relative;
  transform-origin: center center;
  transition: none;
}

/* 标记层 */
.map-markers {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none; /* 默认不接收鼠标事件 */
}

/* 地图标记样式 */
.map-marker {
  position: absolute;
  pointer-events: auto; /* 标记可以接收鼠标事件 */
  cursor: pointer;
  transition: transform 0.2s;
  font-size: 5px;
  line-height: 1;
  border: none;
}

.map-marker:hover {
  transform: translate(0, -10%) scale(1.1);
}
.map-marker:hover > div {
  border: 1px solid #c1b91c;
}

/* 默认标记样式 */
.marker-pin {
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 50% 50% 50% 0;
  transform: rotate(-45deg);
  box-shadow: 0 2px 10px rgba(0,0,0,0.3);
  display: flex;
  align-items: center;
  justify-content: center;
}

.marker-pin::before {
  content: '';
  width: 50%;
  height: 50%;
  background: white;
  border-radius: 50%;
  transform: rotate(45deg);
}

.marker-battle {
  width: 100%;
  height: 100%;
  background: url('/static/images/icon_fight.jpg') no-repeat;
  background-size: cover;
  /*background-color: #ff5a57;*/
  border: .7px solid #000;
}
.marker-random_event {
  width: 100%;
  height: 100%;
  background: url('/static/images/icon_random.jpg') no-repeat;
  background-size: cover;
  /*background-color: #ff5a57;*/
  border: .7px solid #000;
}

/* 标记标签 */
.marker-label {
  position: absolute;
  bottom: 45px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,0.8);
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 5px;
  white-space: nowrap;
  display: none;
}

.map-marker:hover .marker-label {
  display: block;
}

.map-marker .box {
  margin: 0;
  padding: 2px 5px;
}
.map-marker .tooltip-box {
  width: fit-content;
  white-space: nowrap;
  font-size: 5px;
  bottom: calc(100% + 5px);
  border-radius: 5px;
  padding: 2px 4px;
}
.map-marker .tooltip-box::after {
  width: 2px;
  height: 2px;
  border-width: 1px;
}

.map-image {
  width: 100%;
  object-fit: cover;
  transform-origin: center center;
  transition: none;
  user-select: none;
  -webkit-user-drag: none;
}

.map .zoom-info {
  position: absolute;
  top: 0;
  right: 5px;
  color: #ecf0f1;
  font-size: 14px;
  line-height: 34px;
  opacity: 0;
  transition: opacity 0.3s ease;
}
.map .zoom-info.show {
  opacity: .8;
}

.map-box .zoomIn,
.map-box .zoomOut {
  position: absolute;
  right: 5px;
  width: 25px;
  z-index: 1;
  touch-action: manipulation;
}
.map-box .zoomIn {
  bottom: 30px;
}
.map-box .zoomOut {
  bottom: 5px;
}


.battle {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: 2px solid #ae0613;
  background: #082e09fa;
  z-index: 100;
  display: none;
}


.wrapper {
  height: 100%;
  display: flex;
  flex-direction: column;
}
.wrapper.status_show_reverse {
  flex-direction: column-reverse;
  justify-content: flex-end;
}

.player_status {
  position: relative;
  width: 100vw;
  height: fit-content;
  flex-shrink: 0;
  z-index: 10;
  border-top: 2px solid #c1b91c;
  background: #1e1e1ef0;
  padding: 5px;
  display: none;
  box-sizing: border-box;
}
.player_status.show {
  display: flex;
}

.wrapper.status_show_reverse .player_status {
  border-top: none;
  border-bottom: 2px solid #c1b91c;
}

.player_status .info {
  margin-top: 5px;
  margin-left: 5px; 
  flex-shrink: 0
}
.player_status .race_image_box {
  width: 100px;
  height: 100px;
  border-radius: 5px;
  flex-shrink: 0;
}
.player_status .race_name {
  width: 70px; 
}

.player_status .effects {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  width: 50%;
  margin: 5px;
  margin-right: 0;
  margin-bottom: 30px;
  z-index: 1;
}

.player_status .effects .effect {
  margin-bottom: 5px;
  white-space: nowrap;
}

.player_status .controls {
  position: absolute;
  bottom: 0px;
  right: 5px;
  display: flex;
}
.player_status .controls .btn {
  margin: 0 5px;
  pointer-events: auto;
  padding: 3px 7px;
}


dialog {
  position: fixed;
  width: 100%;
  height: 100%;
  max-width: unset;
  max-height: unset;
  transition: all .3s;
  visibility: hidden;
  opacity: 0;
  background: transparent;
  outline: none;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  overflow: hidden;
}
dialog[open] {
  visibility: visible;
  opacity: 1;
}

dialog::backdrop {
  background: rgb(0, 0, 0, .3);
  opacity: 1;
  transform: opacity .3s;
}
dialog.closing {
  visibility: hidden;
  opacity: 0;
}
dialog.closing::backdrop {
  visibility: hidden;
  opacity: 0;
}


dialog > .content {
  position: relative;
  width: calc(100% - 20px);
  min-height: 50%;
  max-height: calc(100% - 200px);
  border-radius: 3px;
  box-sizing: border-box;
}

dialog > .content .title {
  text-align: center;
  font-size: 19px;
}

#inventory .items {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}
#inventory .items .item {
  display: flex;
  align-items: center;
  width: calc(50% - 30px);
  padding: 10px 0;
  margin: 7px;
  border: 2px solid #fa20fa;
  border-radius: 3px;
}
#inventory .items .item_icon {
  width: 30px;
  height: 30px;
}
#inventory .items .item_icon img {
  width: 25px;
  height: 25px;
}

#options .btn {
  padding: 5px 20px;
  margin: 5px 0;
}

label {
  display: flex;
  justify-content: space-between;
}


.back,
#options .back {
  position: absolute;
  top: 0;
  left: 5px;
  padding: 2px 5px;
}


.save_name {
  font-weight: bold;
}
.save_info,
.save_details {
  display: flex;
  justify-content: space-between;
}
.save_details .btn {
  margin: 0 2px;
  flex-shrink: 0;
}
.save_desc {
  display: -webkit-box; 
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3; 
  overflow: hidden; 
}
.save_time {
  flex-shrink: 0;
}



.battle-tools {
  display: flex;
}
.battle-tools .slider-container {
  position: relative;
  width: 140px;
  height: 140px;
  display: flex;
  justify-content: center;
  align-items: center;
}

.battle-tools .value-display {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: #fff;
  margin: 30px auto;
  transition: all 0.1s ease;
  display: flex;
  justify-content: center;
  align-items: center;
}

.battle-tools .value-number {
  font-size: 2em;
  font-weight: bold;
  color: #667eea;
  display: flex;
  justify-content: center;
  position: relative;
}

.metronome .value-number::after {
  content: 'bpm';
  position: absolute;
  bottom: -10px;
  font-size: 15px;
}
.timer .value-number::after {
  content: '';
  position: absolute;
  bottom: -10px;
  display: block;
  width: 20px;
  height: 20px;
  background: url('/static/svg/play.svg') no-repeat;
  background-size: cover;
}
.timer.playing .value-number::after {
  background-image: url('/static/svg/pause.svg');
}

.circular-slider {
  position: relative;
  width: 100%;
  height: 100%;
}

.circular-slider svg {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
}

.circular-slider .track {
  fill: none;
  stroke: rgba(255, 255, 255, 0.2);;
  stroke-width: 20;
  stroke-linecap: round;
}

.circular-slider .progress {
  fill: none;
  stroke: #667eea;
  stroke-width: 20;
  stroke-linecap: round;
  transition: stroke-dasharray 0.1s ease;
}

.circular-slider .handle {
  position: absolute;
  width: 20px;
  height: 20px;
  background: #fff;
  border-radius: 50%;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  cursor: grab;
  transform: translate(-50%, -50%);
  transition: transform 0.1s ease;
}

.circular-slider .handle:active {
  cursor: grabbing;
  transform: translate(-50%, -50%) scale(1.1);
}

.circular-slider .value-display {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100px; 
  height: 100px;
  border-radius: 50%;
  margin: 0;
}

.circular-slider .marks {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  pointer-events: none;
}

.circular-slider .mark {
  position: absolute;
  color: #fff;
  font-size: 8px;
  font-weight: bold;
  transform: translate(-50%, -50%);
}

.metronome .beat-indicator.active {
  background: #667eea;
  transform: translate(-50%, -50%) scale(1.2);
  box-shadow: 0 0 30px rgba(102, 126, 234, 0.6);
}



.battle-tools .buttons {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-bottom: 20px;
}

.battle-tools .btn {
  margin: 0 3px;
  border-radius: 5px;
  cursor: pointer;
  font-size: 1em;
  transition: all 0.3s ease;
  background: #667eea;
  color: #fff;
  border: none;
  text-align: center;
}

.metronome select {
  margin: 0 5px;
  padding: 2px 5px;
  border: none;
  border-radius: 5px;
  font-size: 1em;
  color: #fff;
  background: #667eea;
}